###########################
Settings  and Customization
###########################

There are lots of ways that you can customize your Arches-HIP application to best suit your needs.  

Most of these will require comfort with modifying Python, HTML, CSS and/or Javascript files but are designed to be simple changes that can be easily applied without diving deep into the rest of the Arches or Arches-HIP code.

.. note:: In a production environment (using Apache), you will generally need to run collectstatic and restart Apache to apply these changes.

    No action should be required when using the development server (Django).

Home Page and Branding
======================

Modifying the home page and branding of your Arches-HIP application involves editing some simple html templates to modify the look and feel.  A basic familiarity with HTML and CSS is assumed here.

Your application starts with templates that you can use to start modifying the home page and branding of the web application.  These files are contained in the following folder::
    
    {application name}/{application name}/templates/

Home Page
---------

``index.htm`` contains the template for the main home page content.  You can modify this page to change the image slide show on the home page or modify the saved searches (more on that below).

This is the content of the first page that your users will see, so you'll probably want to really make it your own. You should consider doing the following:

* Update the images and text in the layer slider
* Add you own text to the title block below the layer slider
* Update the saved searches to suit your data (more on that below)

Branding
--------

The templates that manage site-wide branding are ``footer.htm``, ``header.htm``, and ``copyright.htm``.  These templates are used by default for branding on all web application pages.

You should probably keep much of the structure of these templates, and simply input your own labels, icons and information as appropriate.

For example, the header logo on all pages can be altered by modifying the ``<img>`` tag at line 52 of ``header.htm``.  This will change the header image on all web application pages.

Saved Searches
==============

Saved searches are the links shown on the home and search pages by default to help users find data of particular interest.  You will need to update these to be useful for your application.

To do this, start by using the Arches-HIP web application search page to execute the search that you want to save.

For example, you could do a search for the word 'modern'.  You should see the page's url update.  Copy everything after the ``?`` in the url; you should get something like this::

    page=1&termFilter=%5B%7B%22inverted%22%3Afalse%2C%22type%22%3A%22string%22%2C%22context%22%3A%22%22%2C%22context_label%22%3A%22%22%2C%22id%22%3A%22modern%22%2C%22text%22%3A%22modern%22%2C%22value%22%3A%22modern%22%7D%5D&temporalFilter=%7B%22year_min_max%22%3A%5B%5D%2C%22filters%22%3A%5B%5D%2C%22inverted%22%3Afalse%7D&spatialFilter=%7B%22geometry%22%3A%7B%22type%22%3A%22%22%2C%22coordinates%22%3A%5B%5D%7D%2C%22buffer%22%3A%7B%22width%22%3A%220%22%2C%22unit%22%3A%22ft%22%7D%2C%22inverted%22%3Afalse%7D&mapExpanded=false&timeExpanded=false&include_ids=true

There are two html templates in your project that contain saved searches, these files are::

    {application name}/{application name}/templates/index.htm
    {application name}/{application name}/templates/views/saved-searches.htm

``index.htm`` contains the saved searches for the home page and ``saved-searches.htm`` contains the saved searches for the search page.

In both cases, you will find saved searches in blocks that look like this::

    <div class="col-sm-4">
        <div class="servive-block servive-block-default">
            <i class="icon-custom rounded-x icon-bg-dark fa fa-trophy"></i>
            <a class= "" href="{% url 'search_home' %}?"><h2 class="txt-color-blue">{% trans 'Saved Search' %}</h2></a>
            <p>{% trans 'Some description here...' %}</p>
        </div>
    </div>

To update that block to use the example search above for the word modern, I can simply update the label and description text and paste what I copied above after ``{% url 'search_home' %}?`` in the ``<a>`` tag's ``href`` attribute, for example::

    <div class="col-sm-4">
        <div class="servive-block servive-block-default">
            <i class="icon-custom rounded-x icon-bg-dark fa fa-trophy"></i>
            <a class= "" href="{% url 'search_home' %}?page=1&termFilter=%5B%7B%22inverted%22%3Afalse%2C%22type%22%3A%22string%22%2C%22context%22%3A%22%22%2C%22context_label%22%3A%22%22%2C%22id%22%3A%22modern%22%2C%22text%22%3A%22modern%22%2C%22value%22%3A%22modern%22%7D%5D&temporalFilter=%7B%22year_min_max%22%3A%5B%5D%2C%22filters%22%3A%5B%5D%2C%22inverted%22%3Afalse%7D&spatialFilter=%7B%22geometry%22%3A%7B%22type%22%3A%22%22%2C%22coordinates%22%3A%5B%5D%7D%2C%22buffer%22%3A%7B%22width%22%3A%220%22%2C%22unit%22%3A%22ft%22%7D%2C%22inverted%22%3Afalse%7D&mapExpanded=false&timeExpanded=false&include_ids=true"><h2 class="txt-color-blue">{% trans 'Modern' %}</h2></a>
            <p>{% trans 'Find things that are modern.' %}</p>
        </div>
    </div>

Default Map Settings
====================

Arches-HIP needs to be configured to properly zoom and constrain map interfaces by default.  This can be done by simply modifying some settings found in your application's ``settings.py`` file (line 15 by default)::
    
    #DEFAULT_MAP_X = 0
    #DEFAULT_MAP_Y = 0
    #DEFAULT_MAP_ZOOM = 0
    #MAP_MIN_ZOOM = 0
    #MAP_MAX_ZOOM = 19
    #MAP_EXTENT = '-13228037.69691764,3981296.0184014924,-13123624.71628009,4080358.407059081'

To use these settings, you will need to 'uncomment' them (remove the ``#`` at the start of each line), and then change their values to meet your needs.

``DEFAULT_MAP_X`` and ``DEFAULT_MAP_Y`` are the x and y (respectively) coordinate values which all maps will be centered on by default.  ``MAP_EXTENT`` is a string 'bounding box' [min x, min y, max x, max y] representing the extent to which all maps will be constrained.  

All of these coordinates are expressed in the web standard spherical mercator projection (http://spatialreference.org/ref/sr-org/6864/).  A simple converter tool to go between Lat/Long and spherical mercator coordinates can be found here: http://mal2.ch/stuff/latlontomercator.html

``DEFAULT_MAP_ZOOM`` is the default zoom level that all maps will start on.  ``MAP_MIN_ZOOM`` and ``MAP_MAX_ZOOM`` are the minimum and maximum zoom levels that all maps will allow a user to access.  More on zoom levels can be found here: http://openlayers.org/en/v3.3.0/doc/tutorials/concepts.html

Google Anayltics
================

To enable Google Analytics on your web application, you will need to update the ``GOOGLE_ANALYTICS_TRACKING_ID`` setting in your application's settings.py file (line 14 by default).

Uncomment this line (remove the starting ``#``) if it is commented, and paste in your own Google Analytics tracking id between the single quotes at the end of the line, eg::

    GOOGLE_ANALYTICS_TRACKING_ID = 'my-tracking-id'

Enabling this setting will automatically configure the web application to include the Google Analytics scripts.

Map Customization
=================


Basemaps
--------


Geocoding
---------


Overlays
--------


Resource Layers
---------------


Localization
============

